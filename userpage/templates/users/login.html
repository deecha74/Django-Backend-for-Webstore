{% extends 'layouts.html' %}
{% load static %}
{% load crispy_forms_tags %}

{% block title %}
  <title>Login Form</title>
{% endblock %}

{% block main_content %}
  {% include 'users/header.html' %}
  <div class="container">
    {% if user.is_authenticated %}
      <h1>You are logged in {{ user.username }}</h1>
    {% else %}
      <div class="row d-flex justify-content-center">
        <h1 class="row d-flex justify-content-center my-3">Login</h1>

        <div class="col-md-5">
          {% for msg in messages %}
            {% if msg.level == DEFAULT_MESSAGE_LEVELS.SUCCESS %}
              <div class="alert alert-success">{{ msg }}</div>
            {% endif %}
            {% if msg.level == DEFAULT_MESSAGE_LEVELS.ERROR %}
              <div class="alert alert-success">{{ msg }}</div>
            {% endif %}
          {% endfor %}
          <form action="" method="POST" enctype="multipart/form-data" class="shadow p-3">
            {% csrf_token %}
            {{ forms|crispy }}
            <div class="mt-3">
              <input type="submit" class="btb btn-primary" value="Login " />
            </div>
          </form>
          <a href="/" class="btn">Homepage</a>
        </div>
      </div>
    {% endif %}
  </div>

  {% include 'users/footer.html' %}
{% endblock %}
